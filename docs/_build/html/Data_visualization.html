<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data visualization &mdash; Self-driving, multi-scale image analysis 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f2a433a1"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="multiScaleAnalysis" href="modules.html" />
    <link rel="prev" title="Cell Curvature Analysis" href="Cell_CurvatureAnalysis.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Self-driving, multi-scale image analysis
              <img src="_static/multi_scale_analysis_logo.jpg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting started and installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Getting started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Microscope characterization</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="PSF_analysis.html">PSF analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="ShannonEntropyAnalysis.html">Shannon Entropy Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Low-resolution analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Data_stitching.html">Data stitching</a></li>
<li class="toctree-l1"><a class="reference internal" href="LowRes_Segmentation.html">Low-resolution segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="HopkinsStatistics.html">Hopkins Statistics Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">High-resolution analysis</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="HighRes_Segmentation.html">High-resolution segmentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cell_ShapeAnalysis.html">Cell Shape Feature Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cell_CurvatureAnalysis.html">Cell Curvature Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data visualization</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data visualization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#generate-a-custom-colormap-for-labels">Generate a custom colormap for labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualization-of-low-resolution-data">Visualization of low-resolution data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-data-for-low-resolution-visualization">Test data for low-resolution visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualization-of-high-resolution-data">Visualization of high-resolution data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-data-for-high-resolution-visualization">Test data for high-resolution visualization</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API references</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.html">multiScaleAnalysis</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Self-driving, multi-scale image analysis</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data visualization</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Data_visualization.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-visualization">
<h1>Data visualization<a class="headerlink" href="#data-visualization" title="Link to this heading"></a></h1>
<p>Here we provide tools to visualize tens to hundreds of timepoints of large light-sheet
microscopy data in 3D. For this, we leverage the open-source python based Napari software
<a class="reference external" href="https://napari.org/stable/">https://napari.org/stable/</a>.</p>
<section id="generate-a-custom-colormap-for-labels">
<h2>Generate a custom colormap for labels<a class="headerlink" href="#generate-a-custom-colormap-for-labels" title="Link to this heading"></a></h2>
<p>To visualize the segmented data with a dedicated colormap from Fiji (Rainbow Smooth.lut), we
designed our own Fiji/ImageJ macro to save the data in the appropriate format for Napari.</p>
<p>To install the Rainbow Smooth.lut, go to File&gt;Import&gt;Lut.. and select the Rainbow Smooth.lut from
the folder.</p>
<p>To run the ImageJ macro, drag and drop the ijm file into Fiji and modify the path and segmentedfilename to the data.</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="n">parentpath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Z:/Fiolka/LabMembers/Stephan/multiscale_data/revision_experiments/test_dataset/visualization&quot;</span><span class="p">;</span>
<span class="n">segmentedfilename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;filename&quot;</span>
</pre></div>
</div>
<p>The data should be in the following format:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.
|-- parentpath
|   |-- t00000
|   |   |-- filename.tif
|   |-- t00001
|   |   |-- filename.tif
...
</pre></div>
</div>
<p>It will produce the following output in the same folder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.
|-- parentpath
|   |-- t00000
|   |   |-- filename.tif
|   |   |-- filename_red.tif
|   |   |-- filename_green.tif
|   |   |-- filename_blue.tif
|   |-- t00001
|   |   |-- filename.tif
|   |   |-- filename_red.tif
|   |   |-- filename_green.tif
|   |   |-- filename_blue.tif
...
</pre></div>
</div>
<p>with filename_red.tif, filename_green.tif, filename_blue.tif containing
the red, green and blue contributions of the RGB labels. These individual label images can then
be loaded to napari to make label the individual segmented cells in different colors.</p>
</section>
<section id="visualization-of-low-resolution-data">
<h2>Visualization of low-resolution data<a class="headerlink" href="#visualization-of-low-resolution-data" title="Link to this heading"></a></h2>
<p>To iterate over a folder of raw images and segmentations, we scripted 3D rendering
with Napari to obtain consistent renderings at different timepoints with the same parameters.</p>
<p>An example script for low-resolution visualization is available under visualize_stitched_lowres.py
<a class="reference internal" href="multiScaleAnalysis.visualization.html#module-multiScaleAnalysis.visualization.visualize_stitched_lowres" title="multiScaleAnalysis.visualization.visualize_stitched_lowres"><code class="xref py py-meth docutils literal notranslate"><span class="pre">multiScaleAnalysis.visualization.visualize_stitched_lowres()</span></code></a></p>
<p>To run it, provide the data paths to the low-resolution rawdatafolder, the low-resolution segmented data and
where you want to save the rendered data (imagevisu.visualizedfolder).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">imagevisu</span><span class="o">.</span><span class="n">rawdatafolder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rawdatafolder_parent</span><span class="p">,</span> <span class="s2">&quot;rawdata&quot;</span><span class="p">)</span>
<span class="c1"># segmented data</span>
<span class="n">imagevisu</span><span class="o">.</span><span class="n">segmentationfolder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rawdatafolder_parent</span><span class="p">,</span> <span class="s2">&quot;lowres_segmentation_labelimages&quot;</span><span class="p">)</span>
<span class="n">imagevisu</span><span class="o">.</span><span class="n">visualizedfolder</span> <span class="o">=</span> <span class="n">imagevisu</span><span class="o">.</span><span class="n">rawdatafolder</span> <span class="o">+</span> <span class="s2">&quot;_visualized&quot;</span>
</pre></div>
</div>
<p>Then, the scripts iterates over the individual timepoints with the visualization parameters defined by
a visualization_param dictionary:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">visualization_param</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">camera_angle1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">169</span><span class="p">,</span> <span class="o">-</span><span class="mi">18</span><span class="p">,</span> <span class="mi">72</span><span class="p">),</span>
    <span class="n">camera_angle2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="o">-</span><span class="mi">53</span><span class="p">,</span> <span class="o">-</span><span class="mi">120</span><span class="p">),</span>
    <span class="n">camera_zoom</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
    <span class="n">raw_contrast_limits</span><span class="o">=</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">1400</span><span class="p">),</span>
    <span class="n">raw_contrast_limits_vessels</span><span class="o">=</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">15027</span><span class="p">),</span>
    <span class="n">raw_gamma</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span>
    <span class="n">raw_gamma_vessel</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">label_opacity</span><span class="o">=</span><span class="mf">0.51</span><span class="p">,</span>
    <span class="n">rendering_dimension</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">blending1</span><span class="o">=</span><span class="s1">&#39;translucent&#39;</span><span class="p">,</span>
    <span class="n">blending2</span><span class="o">=</span><span class="s1">&#39;additive&#39;</span><span class="p">,</span>
    <span class="n">establish_param</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">scale_to_save</span><span class="o">=</span><span class="mi">5</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Here, we generate and save two camera angles (camera_angle1, camera_angle2), set the zoom (camera_zoom),
the contrast limits of both raw data channels (raw_contrast_limits,raw_contrast_limits_vessels), the
gamma values of both raw data channels (raw_gamma, raw_gamma_vessel), define that the data is rendered in 3D
(rendering_dimension), label opacity (label_opacity), two blending modes based on the data to add (blending1, blending2),
and the quality of the saved rendering (scale_to_save).</p>
<p>Note 1: If you don’t know what parameters such as contrast limits or angles to use, set the establish_param flag to 1
and the script will open Napari with the images to find the best parameters. For batch processing, set establish_param=0.</p>
<p>Note 2: We downsampled the rawimages to provide more efficient computation to fit the label image.</p>
</section>
<section id="test-data-for-low-resolution-visualization">
<h2>Test data for low-resolution visualization<a class="headerlink" href="#test-data-for-low-resolution-visualization" title="Link to this heading"></a></h2>
<p>Test data is available for the low-resolution visualization in the folder Exemplary_VisualizationDataset.</p>
<p>on Synapse <a class="reference external" href="https://doi.org/10.7303/syn61795850">https://doi.org/10.7303/syn61795850</a>
or Zenodo: <a class="reference external" href="https://doi.org/10.5281/zenodo.12791724">https://doi.org/10.5281/zenodo.12791724</a></p>
<p>It contains data in the folder structured as:</p>
<dl class="field-list simple">
<dt class="field-odd">low_resolution_rawdata<span class="colon">:</span></dt>
<dd class="field-odd"><p>The raw data to visualize (macrophage and vessels)</p>
</dd>
<dt class="field-even">low_resolutionsegmentation<span class="colon">:</span></dt>
<dd class="field-even"><p>The low-resolution segmentation to visualize</p>
</dd>
<dt class="field-odd">low_resolutionsegmentation_labelimages<span class="colon">:</span></dt>
<dd class="field-odd"><p>The low-resolution segmentation after the ImageJ macro</p>
</dd>
<dt class="field-even">low_resolution_visualization_results<span class="colon">:</span></dt>
<dd class="field-even"><p>The final visualization results.</p>
</dd>
</dl>
</section>
<section id="visualization-of-high-resolution-data">
<h2>Visualization of high-resolution data<a class="headerlink" href="#visualization-of-high-resolution-data" title="Link to this heading"></a></h2>
<p>High-resolution data can be visualized similarly as low-resolution data. Here, we describe
in more detail the visualization of high-resolution rawdata of cancer spheroids in a collagen matrix
from SUM159 breast cancer cells labelled with two colors 1:1 (Lifeact-GFP and the Lifeact-mCherry).
The python file for this script is in <code class="xref py py-meth docutils literal notranslate"><span class="pre">visualize_with_napariHighRes_spheroids.py()</span></code>.</p>
<p>First, specify the path to the raw data (imagevisu.rawdatafolder), the folder to save the rendering results
(imagevisu.visualizedfolder), the region to visualize (imagevisu.region).</p>
<p>Moreover, if you already have established the visualization parameters, choose establish_param=0. If not,
set establish_param=1, which will open Napari at timepoint zero to establish the rendering parameters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">imagevisu</span><span class="o">.</span><span class="n">rawdatafolder</span> <span class="o">=</span> <span class="s1">&#39;~/test_dataset/visualization_highres&#39;</span>
<span class="n">experimentfolder_result</span> <span class="o">=</span> <span class="n">imagevisu</span><span class="o">.</span><span class="n">rawdatafolder</span> <span class="o">+</span> <span class="s2">&quot;_highres_visualized_test&quot;</span>
<span class="n">imagevisu</span><span class="o">.</span><span class="n">visualizedfolder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">experimentfolder_result</span><span class="p">,</span> <span class="s1">&#39;visualized&#39;</span><span class="p">)</span>
<span class="n">imagevisu</span><span class="o">.</span><span class="n">region</span> <span class="o">=</span> <span class="s1">&#39;high_stack_002&#39;</span>
<span class="n">imagevisu</span><span class="o">.</span><span class="n">establish_param</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>In this example, we set the visualization parameters as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">visualization_param</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">camera_angle1</span><span class="o">=</span><span class="p">(</span><span class="mf">9.008</span><span class="p">,</span> <span class="o">-</span><span class="mf">20.465</span><span class="p">,</span> <span class="mf">63.542</span><span class="p">),</span>
    <span class="n">camera_angle2</span><span class="o">=</span><span class="p">(</span><span class="mf">14.71</span><span class="p">,</span> <span class="o">-</span><span class="mf">37.523</span><span class="p">,</span> <span class="mf">70.406</span><span class="p">),</span>
    <span class="n">camera_zoom</span><span class="o">=</span><span class="mf">0.28</span><span class="p">,</span>
    <span class="n">raw_contrast_limits_magenta</span><span class="o">=</span><span class="p">(</span><span class="mi">78</span><span class="p">,</span> <span class="mi">480</span><span class="p">),</span>
    <span class="n">raw_contrast_limits_cyan</span><span class="o">=</span><span class="p">(</span><span class="mi">77</span><span class="p">,</span> <span class="mi">1463</span><span class="p">),</span>
    <span class="n">raw_gamma_magenta</span><span class="o">=</span><span class="mf">0.60</span><span class="p">,</span>
    <span class="n">raw_gamma_cyan</span><span class="o">=</span><span class="mf">0.96</span><span class="p">,</span>
    <span class="n">magenta_colormap</span> <span class="o">=</span><span class="s1">&#39;magenta&#39;</span><span class="p">,</span>
    <span class="n">cyan_colormap</span><span class="o">=</span><span class="s1">&#39;cyan&#39;</span><span class="p">,</span>
    <span class="n">opacity_cyan</span><span class="o">=</span><span class="mf">0.64</span><span class="p">,</span>
    <span class="n">rendering_dimension</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">raw_rescale_factor</span> <span class="o">=</span><span class="p">[</span><span class="mf">2.564</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="n">scale_to_save</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">imagename_cyan</span><span class="o">=</span><span class="s2">&quot;1_CH488_000000.tif&quot;</span><span class="p">,</span>
    <span class="n">imagename_magenta</span><span class="o">=</span><span class="s2">&quot;1_CH594_000000.tif&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Specifically, we generate and save two camera angles (camera_angle1, camera_angle2), set the zoom (camera_zoom),
the contrast limits of both raw data channels (raw_contrast_limits_magenta,raw_contrast_limits_cyan), the
gamma values of both raw data channels (raw_gamma_magenta, raw_gamma_cyan),
set the colormaps (magenta_colormap, opacity_cyan), define the opacity of the image on top (opacity_cyan), define that the data is rendered in 3D
(rendering_dimension), set the voxel spacings as the data is not isotropic (raw_rescale_factor), the quality of the saved rendering (scale_to_save),
and the two names of the raw data images (imagename_cyan, imagename_magenta).</p>
<p>In addition to the here described script for rendering spheroids, we also provide scripts used to
visualize A375 cancer cells, MDA-MB-231 cancer cells, nuclei histones, and U-2 OS cancer cells with
segmented macrophages.</p>
</section>
<section id="test-data-for-high-resolution-visualization">
<h2>Test data for high-resolution visualization<a class="headerlink" href="#test-data-for-high-resolution-visualization" title="Link to this heading"></a></h2>
<p>Test data is available for the high-resolution visualization in the folder
Exemplary_VisualizationDataset.</p>
<dl class="field-list simple">
<dt class="field-odd">on Synapse<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://doi.org/10.7303/syn61795850">https://doi.org/10.7303/syn61795850</a></p>
</dd>
<dt class="field-even">or Zenodo<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://doi.org/10.5281/zenodo.12791724">https://doi.org/10.5281/zenodo.12791724</a></p>
</dd>
</dl>
<p>It contains:</p>
<dl class="field-list simple">
<dt class="field-odd">high_resolution_rawdata<span class="colon">:</span></dt>
<dd class="field-odd"><p>The raw data to visualize (two spheroid channels)</p>
</dd>
<dt class="field-even">high_resolution_visualization_results<span class="colon">:</span></dt>
<dd class="field-even"><p>The final visualization results.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Cell_CurvatureAnalysis.html" class="btn btn-neutral float-left" title="Cell Curvature Analysis" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.html" class="btn btn-neutral float-right" title="multiScaleAnalysis" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Daetwyler Stephan.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>